var P=Object.defineProperty;var T=(s,e,n)=>e in s?P(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var b=(s,e,n)=>(T(s,typeof e!="symbol"?e+"":e,n),n);import{i as E,g as M,s as j,r as g,j as t,a as r,F as p,d as O,b as W,c as q,e as z,f as J,h as Q,k as B,l as F,m as G,n as H,o as V,p as X,q as Y,u as v,t as w,v as K,w as Z,x as ee,y as te,z as se,_ as ne,A as ae,B as re,R as ie,C as u,N as A,D as le,H as oe,E as ce,G as de}from"./vendor.8edf686f.js";const he=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}};he();var ue={apiKey:"AIzaSyAR6S5l9UiabY1TpO1DelUprklAJ6V5A8w",authDomain:"sockets-717fc.firebaseapp.com",projectId:"sockets-717fc",storageBucket:"sockets-717fc.appspot.com",messagingSenderId:"1073692013836",appId:"1:1073692013836:web:1af80e41fe3cc3c6a50529"};class pe{constructor(){b(this,"firebaseApp");b(this,"firebaseAuth");this.firebaseApp=E(ue),this.firebaseAuth=M()}async getAuthAnonymously(){var e;return(e=await j(this.firebaseAuth))==null?void 0:e.user}}var me=new pe,x={path:"hello",next:{user:{path:"user"}}};class fe{constructor(){}save(e,n){localStorage.setItem(e,JSON.stringify(n))}read(e){return JSON.parse(localStorage.getItem(e)||"null")}delete(e){localStorage.removeItem(e)}get pathUser(){var e;return`${x.path}.${(e=x.next)==null?void 0:e.user.path}`}saveUser(e){this.save(this.pathUser,e)}readUser(){return this.read(this.pathUser)}deleteUser(){this.delete(this.pathUser)}}var U=new fe;const R=g.exports.createContext(null);function N(){return g.exports.useContext(R)}function ge(s){const[e,n]=g.exports.useState(null);function l(){U.deleteUser(),n(null)}function a(){e||n(U.readUser())}function c(){!e||U.saveUser(e)}async function o(){n(await me.getAuthAnonymously())}return g.exports.useEffect(()=>{a(),c(),console.log(e)},[e]),t(R.Provider,{value:{user:e,logout:l,loginAnonymously:o},children:s.children})}function be(s){const[e,n]=g.exports.useState(!1),[l,a]=g.exports.useState(!1);!e&&s.getInstallPrompt().then(()=>n(!0)).then(()=>a(!0));async function c(){const m=await s.getInstallPrompt();m.prompt();const{outcome:f}=await m.userChoice;f==="accepted"&&o()}function o(){a(!1)}return t("section",{className:"app-prompt-pwa",children:l&&r(p,{children:[r("button",{className:"btn btn-dark shadow",onClick:()=>c(),children:[t(O,{}),t("small",{className:"align-middle fw-bold p-2",children:"Install as PWA"})]}),r("button",{className:"btn btn-secondary shadow",onClick:()=>o(),children:[t(W,{}),t("small",{className:"align-middle fw-bold p-2",children:"Dismiss"})]})]})})}var d={name:"Hello",path:"hello",next:{apps:{name:"Apps",path:"apps",next:{test:{name:"App Test",path:"test"}}},login:{name:"Login",path:"login"},news:{name:"News",path:"news"},user:{name:"User",path:"user",next:{add:{name:"Add friend",path:"add"},qrs:{name:"QR Code scaner",path:"qrs"},uid:{name:"User ID",path:"uid"}}}}};class Ne{constructor(){b(this,"parser",new Map);this.parser.set("/"+this.pathApps,this.nameApps),this.parser.set("/"+this.pathApps+"/"+this.pathAppTest,this.nameAppTest),this.parser.set("/"+this.pathNews,this.nameNews),this.parser.set("/"+this.pathUser,this.nameUser),this.parser.set("/"+this.pathUser+"/"+this.pathUserAdd,this.nameUserAdd),this.parser.set("/"+this.pathUser+"/"+this.pathUserQRS,this.nameUserQRS),this.parser.set("/"+this.pathUser+"/"+this.pathUserUID,this.nameUserUID),this.parser.set("/"+this.pathLogin,this.nameLogin)}parse(e){return this.parser.get(e)||""}get pathApps(){var e;return`${(e=d.next)==null?void 0:e.apps.path}`}get nameApps(){var e;return`${(e=d.next)==null?void 0:e.apps.name}`}get pathAppTest(){var e,n;return`${(n=(e=d.next)==null?void 0:e.apps.next)==null?void 0:n.test.path}`}get nameAppTest(){var e,n;return`${(n=(e=d.next)==null?void 0:e.apps.next)==null?void 0:n.test.name}`}get pathNews(){var e;return`${(e=d.next)==null?void 0:e.news.path}`}get nameNews(){var e;return`${(e=d.next)==null?void 0:e.news.name}`}get pathUser(){var e;return`${(e=d.next)==null?void 0:e.user.path}`}get nameUser(){var e;return`${(e=d.next)==null?void 0:e.user.name}`}get pathUserAdd(){var e,n;return`${(n=(e=d.next)==null?void 0:e.user.next)==null?void 0:n.add.path}`}get nameUserAdd(){var e,n;return`${(n=(e=d.next)==null?void 0:e.user.next)==null?void 0:n.add.name}`}get pathUserQRS(){var e,n;return`${(n=(e=d.next)==null?void 0:e.user.next)==null?void 0:n.qrs.path}`}get nameUserQRS(){var e,n;return`${(n=(e=d.next)==null?void 0:e.user.next)==null?void 0:n.qrs.name}`}get pathUserUID(){var e,n;return`${(n=(e=d.next)==null?void 0:e.user.next)==null?void 0:n.uid.path}`}get nameUserUID(){var e,n;return`${(n=(e=d.next)==null?void 0:e.user.next)==null?void 0:n.uid.name}`}get pathLogin(){var e;return`${(e=d.next)==null?void 0:e.login.path}`}get nameLogin(){var e;return`${(e=d.next)==null?void 0:e.login.name}`}}var i=new Ne;let h,S,k;class ye{constructor(e){b(this,"x",0);b(this,"y",0);this.selector=e}start(e){h=document.querySelector(this.selector),S=e==null?void 0:e.prev,k=e==null?void 0:e.next,e==null||e.curr,h.addEventListener("touchstart",this.onTouchStart),h.addEventListener("touchmove",this.onTouchMove),h.addEventListener("touchend",this.onTouchEnd)}stop(){h.removeEventListener("touchstart",this.onTouchStart),h.removeEventListener("touchmove",this.onTouchMove),h.removeEventListener("touchend",this.onTouchEnd)}onTouchStart(e){this.x=e.touches[0].clientX,this.y=e.touches[0].clientY}onTouchMove(e){const n=Math.min(window.innerWidth/3,333),l=.33,a=e.touches[0].clientX,c=e.touches[0].clientY,o=this.x-a,m=this.y-c;if(Math.abs(o)>Math.abs(m)){const f=o<=0?1:-1,_=Math.max(1-(Math.abs(o)-Math.abs(m))/n,0),D=f*l*(Math.abs(o)-Math.abs(m));h.style.opacity=`${_}`,h.style.transform=`translateX( ${D}px )`,h.style.transition="none"}if(Math.abs(o)>Math.abs(m)&&Math.abs(o)-Math.abs(m)>n){if(o<0)return S();if(o>0)return k()}}onTouchEnd(e){h.style.opacity="",h.style.transform="",h.style.transition="",this.x=0,this.y=0}}var $=new ye("#app-main-content");function Ue(s){return t("section",{className:"app-infobar-bottom",children:s.userUID?r(p,{children:[r("button",{className:`btn ${s.current===s.paths.news?"active":""}`,onClick:()=>s.toNews(),children:[t(q,{}),t("small",{className:"text-muted d-block",children:s.names.news})]}),r("button",{className:`btn ${s.current===s.paths.apps?"active":""}`,onClick:()=>s.toApps(),children:[t(z,{}),t("small",{className:"text-muted d-block",children:s.names.apps})]}),r("button",{className:`btn ${s.current===s.paths.user?"active":""}`,onClick:()=>s.toUser(),children:[t(J,{}),t("small",{className:"text-muted d-block",children:s.names.user})]})]}):t(p,{children:r("button",{className:"btn",onClick:()=>{},children:[t(Q,{}),t("small",{className:"text-muted d-block",children:"Our policy"})]})})},s.userUID)}function ve(s){return t(p,{children:t("section",{className:"app-infobar-top",children:s.userUID?r(p,{children:[r("button",{className:"btn",onClick:()=>s.goBack(),children:[t(B,{}),t("small",{className:"text-muted align-middle p-2",children:s.pathURL})]}),t("button",{className:"btn",onClick:()=>s.logout(),children:t(F,{})})]}):t(p,{children:r("button",{className:"btn",children:[t(G,{}),t("small",{className:"text-muted align-middle p-2",children:"Need help?"})]})})},s.userUID)})}function we(s){return r("form",{className:"app-login-form",children:[t("h2",{className:"fw-bold mb-0",children:"Join for free"}),t("hr",{className:"my-3"}),t("h3",{className:"fs-5 fw-bold mb-3",children:"Use a third-party"}),r("button",{className:"w-100 py-2 mb-2 btn btn-outline-primary btn-facebook",disabled:!0,children:[t(H,{}),t("span",{className:"align-middle p-2",children:"Join with Facebook"})]}),r("button",{className:"w-100 py-2 mb-2 btn btn-outline-success btn-google",disabled:!0,children:[t(V,{}),t("span",{className:"align-middle p-2",children:"Join with Google"})]}),r("button",{className:"w-100 py-2 mb-2 btn btn-outline-dark btn-github",disabled:!0,children:[t(X,{}),t("span",{className:"align-middle p-2",children:"Join with GitHub"})]}),t("hr",{className:"my-3"}),t("h3",{className:"fs-5 fw-bold mb-3",children:"Or join as anonymous"}),r("button",{className:"w-100 py-2 mb-2 btn btn-outline-secondary",onClick:()=>s.loginAnonymously(),children:[t(Y,{}),t("span",{className:"align-middle p-2",children:"Join anonymously"})]})]})}function I(s){return r("button",{className:"app-button-app btn btn-light",onClick:()=>s.open(),children:[s.icon,t("small",{className:"text-muted d-block",children:s.name})]})}function Ae(){const s=v();return r("section",{id:"app-apps-container",children:[t(I,{open:()=>s(i.pathAppTest),icon:t(w,{}),name:i.nameAppTest}),t(I,{open:()=>s(i.pathAppTest),icon:t(w,{}),name:i.nameAppTest})]})}function xe(){return t(p,{children:t("h1",{children:"News"})})}var Se="/hello-ts/assets/anonymous.20c3dde4.png";function ke(s){return r("section",{className:"app-user-view",children:[t("img",{src:s.user.photoURL||Se,alt:s.user.displayName||"Anonymous",className:"user-photo"}),t("h2",{className:"lead mb-4",children:s.user.displayName||"Anonymous"}),t("div",{className:"info-block",children:r("button",{className:"btn btn-dark btn-id",onClick:()=>s.getID(),children:[t(K,{}),t("small",{className:"ms-2",children:"Get ID"})]})}),t("div",{className:"info-block",children:r("button",{className:"btn btn-dark btn-id",children:[t(Z,{}),t("small",{className:"ms-2",children:"Share"})]})})]})}function C(s){return r("section",{className:"app-display-user",children:[t("span",{className:"item lead",children:t("span",{children:s.selectedUser})}),t("span",{className:"item btn p-0",onClick:()=>s.unselectUser(),children:s.onClickName||"change"})]})}function $e(){const{user:s}=N(),e=v(),n=["aaa","bbb","ccc","ddd","eee","fff","ggg","hhh","iii","jjj","kkk","lll","mmm","nnn","ooo","ppp","rrr","sss","ttt","uuu","www","zzz"];return r("section",{id:"app-user",children:[t(ke,{getID:()=>e(i.pathUserUID),user:{displayName:(s==null?void 0:s.displayName)||"",photoURL:(s==null?void 0:s.photoURL)||""}}),t("div",{className:"user-firends",children:n.map(l=>t(C,{onClickName:"delete",selectedUser:l,unselectUser:()=>confirm(`Are you sure you want to remove ${l} from your Friends List?`)},l))}),r("aside",{className:"app-add-user",children:[t("button",{className:"btn btn-light",onClick:()=>e(i.pathUserQRS),children:t(ee,{})}),t("button",{className:"btn btn-light",onClick:()=>e(i.pathUserAdd),children:t(te,{})})]})]})}function Ie(s){return t("section",{className:"app-content",children:s.children})}function L(s){const e=["aaa","bbb","ccc","ddd","eee","fff","ggg","hhh","iii","jjj","kkk","lll","mmm","nnn","ooo","ppp","rrr","sss","ttt","uuu","www","zzz"],[n,l]=g.exports.useState("");return r("section",{className:"app-select-user",children:[t("h2",{className:"lead",children:"Select user"}),r("div",{className:"input-group",children:[t("input",{type:"text",className:"form-control",onChange:a=>l(a.target.value)}),t("span",{className:"input-group-text",children:t(se,{})})]}),t("div",{className:"outcome-users",children:e.filter(a=>a.match(new RegExp(n,"gi"))).map(a=>t("button",{className:"btn",onClick:()=>s.setSelectedUser(a),children:a},a))})]})}function Re(){const[s,e]=g.exports.useState("");return t(p,{children:s?r("article",{id:"app-layout-test",children:[t(C,{selectedUser:s,unselectUser:()=>e("")}),t(Ie,{})]}):t(L,{setSelectedUser:n=>e(n)})})}function Ce(){return N(),t("section",{id:"app-user-add",children:t(L,{setSelectedUser:()=>confirm("Add selected user?")})})}function Le(){const{user:s}=N();return t("section",{id:"app-user-uid",children:t(ne,{value:(s==null?void 0:s.uid)||"",className:"user-qr-code"})})}function _e(){return N(),t("section",{id:"app-user-qrs",children:t(ae,{className:"user-qr-reader",onResult:()=>confirm("Add scaned user?"),constraints:{facingMode:"environment",aspectRatio:1}})})}function De(){const s=re(),e=v(),n=[i.pathNews,i.pathApps,i.pathUser],l=s.pathname.split(/\//g)[1],{user:a,logout:c,loginAnonymously:o}=N();return g.exports.useEffect(()=>($.start({curr:l,prev:()=>e(n[n.indexOf(l)-1]||l),next:()=>e(n[n.indexOf(l)+1]||l)}),()=>{$.stop()})),r(p,{children:[t(ve,{goBack:()=>e(-1),logout:()=>c(),userUID:a==null?void 0:a.uid,pathURL:i.parse(s.pathname)}),t("main",{id:"app-main-content",children:t(ie,{children:a?r(p,{children:[r(u,{path:i.pathApps,children:[t(u,{path:"",element:t(Ae,{})}),t(u,{path:i.pathAppTest,element:t(Re,{})})]}),t(u,{path:i.pathNews,element:t(xe,{})}),r(u,{path:i.pathUser,children:[t(u,{path:"",element:t($e,{})}),t(u,{path:i.pathUserAdd,element:t(Ce,{})}),t(u,{path:i.pathUserQRS,element:t(_e,{})}),t(u,{path:i.pathUserUID,element:t(Le,{})})]}),t(u,{path:"*",element:t(A,{to:i.pathApps})})]}):r(p,{children:[t(u,{path:i.pathLogin,element:t(we,{loginAnonymously:()=>o()})}),t(u,{path:"*",element:t(A,{to:i.pathLogin})})]})})},s.pathname),t(Ue,{toApps:()=>e(i.pathApps),toNews:()=>e(i.pathNews),toUser:()=>e(i.pathUser),userUID:a==null?void 0:a.uid,current:s.pathname.split(/\//g)[1],names:{apps:i.nameApps,news:i.nameNews,user:i.nameUser},paths:{apps:i.pathApps,news:i.pathNews,user:i.pathUser}})]})}function Pe(s={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:l,onRegistered:a,onRegisterError:c}=s;let o;const m=async(f=!0)=>{};return"serviceWorker"in navigator&&(o=new le("/hello-ts/sw.js",{scope:"/hello-ts/",type:"classic"}),o.addEventListener("activated",f=>{f.isUpdate?window.location.reload():l==null||l()}),o.register({immediate:e}).then(f=>{a==null||a(f)}).catch(f=>{c==null||c(f)})),m}let y;class Te{constructor(){b(this,"updateSW");b(this,"installPromptReady",new Event("isInstallPromptReady"));this.updateSW=Pe({onNeedRefresh(){},onOfflineReady(){}}),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),y=e,window.dispatchEvent(this.installPromptReady)}),this.getInstallPrompt()}async getInstallPrompt(){return new Promise((e,n)=>{if(y)return e(y);window.addEventListener("isInstallPromptReady",l=>e(y))})}}var Ee=new Te;function Me(){return r(p,{children:[t(be,{getInstallPrompt:Ee.getInstallPrompt}),t(oe,{children:t(ge,{children:t(De,{})})})]})}ce.exports.render(t(de.StrictMode,{children:t(Me,{})}),document.getElementById("root"));
