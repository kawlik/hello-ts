var P=Object.defineProperty;var _=(n,e,r)=>e in n?P(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var f=(n,e,r)=>(_(n,typeof e!="symbol"?e+"":e,r),r);import{i as C,g as E,s as M,r as g,j as t,a as o,F as p,d as R,b as O,c as D,e as W,f as J,h as j,k as B,l as F,m as H,n as q,o as z,p as X,q as Y,u as k,t as w,v as G,R as K,w as b,N,x as V,H as Q,y as Z,z as ee}from"./vendor.80055f74.js";const te=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}};te();var ne={apiKey:"AIzaSyAR6S5l9UiabY1TpO1DelUprklAJ6V5A8w",authDomain:"sockets-717fc.firebaseapp.com",projectId:"sockets-717fc",storageBucket:"sockets-717fc.appspot.com",messagingSenderId:"1073692013836",appId:"1:1073692013836:web:1af80e41fe3cc3c6a50529"};class se{constructor(){f(this,"firebaseApp");f(this,"firebaseAuth");this.firebaseApp=C(ne),this.firebaseAuth=E()}async getAuthAnonymously(){var e;return(e=await M(this.firebaseAuth))==null?void 0:e.user}}var ae=new se,x={path:"hello",next:{user:{path:"user"}}};class re{constructor(){}save(e,r){localStorage.setItem(e,JSON.stringify(r))}read(e){return JSON.parse(localStorage.getItem(e)||"null")}delete(e){localStorage.removeItem(e)}get pathUser(){var e;return`${x.path}.${(e=x.next)==null?void 0:e.user.path}`}saveUser(e){this.save(this.pathUser,e)}readUser(){return this.read(this.pathUser)}deleteUser(){this.delete(this.pathUser)}}var A=new re;const $=g.exports.createContext(null);function ie(){return g.exports.useContext($)}function oe(n){const[e,r]=g.exports.useState(null);function c(){A.deleteUser(),r(null)}function s(){e||r(A.readUser())}function l(){!e||A.saveUser(e)}async function i(){r(await ae.getAuthAnonymously())}return g.exports.useEffect(()=>{s(),l(),console.log(e)},[e]),t($.Provider,{value:{user:e,logout:c,loginAnonymously:i},children:n.children})}function le(n){const[e,r]=g.exports.useState(!1),[c,s]=g.exports.useState(!1);!e&&n.getInstallPrompt().then(()=>r(!0)).then(()=>s(!0));async function l(){const u=await n.getInstallPrompt();u.prompt();const{outcome:d}=await u.userChoice;d==="accepted"&&i()}function i(){s(!1)}return t("section",{className:"app-prompt-pwa",children:c&&o(p,{children:[o("button",{className:"btn btn-dark shadow",onClick:()=>l(),children:[t(R,{}),t("small",{className:"align-middle fw-bold p-2",children:"Install as PWA"})]}),o("button",{className:"btn btn-secondary shadow",onClick:()=>i(),children:[t(O,{}),t("small",{className:"align-middle fw-bold p-2",children:"Dismiss"})]})]})})}var m={name:"Hello",path:"hello",next:{apps:{name:"Apps",path:"apps",next:{test:{name:"App Test",path:"test"}}},login:{name:"Login",path:"login"},news:{name:"News",path:"news"},user:{name:"User",path:"user"}}};class ce{constructor(){f(this,"parser",new Map);this.parser.set("/"+this.pathApps,this.nameApps),this.parser.set("/"+this.pathApps+"/"+this.pathAppTest,this.nameAppTest),this.parser.set("/"+this.pathNews,this.nameNews),this.parser.set("/"+this.pathUser,this.nameUser),this.parser.set("/"+this.pathLogin,this.nameLogin)}parse(e){return this.parser.get(e)||""}get pathApps(){var e;return`${(e=m.next)==null?void 0:e.apps.path}`}get nameApps(){var e;return`${(e=m.next)==null?void 0:e.apps.name}`}get pathAppTest(){var e,r;return`${(r=(e=m.next)==null?void 0:e.apps.next)==null?void 0:r.test.path}`}get nameAppTest(){var e,r;return`${(r=(e=m.next)==null?void 0:e.apps.next)==null?void 0:r.test.name}`}get pathNews(){var e;return`${(e=m.next)==null?void 0:e.news.path}`}get nameNews(){var e;return`${(e=m.next)==null?void 0:e.news.name}`}get pathUser(){var e;return`${(e=m.next)==null?void 0:e.user.path}`}get nameUser(){var e;return`${(e=m.next)==null?void 0:e.user.name}`}get pathLogin(){var e;return`${(e=m.next)==null?void 0:e.login.path}`}get nameLogin(){var e;return`${(e=m.next)==null?void 0:e.login.name}`}}var a=new ce;let h,U,S;class he{constructor(e){f(this,"x",0);f(this,"y",0);this.selector=e}start(e){h=document.querySelector(this.selector),U=e==null?void 0:e.prev,S=e==null?void 0:e.next,e==null||e.curr,h.addEventListener("touchstart",this.onTouchStart),h.addEventListener("touchmove",this.onTouchMove),h.addEventListener("touchend",this.onTouchEnd)}stop(){h.removeEventListener("touchstart",this.onTouchStart),h.removeEventListener("touchmove",this.onTouchMove),h.removeEventListener("touchend",this.onTouchEnd)}onTouchStart(e){this.x=e.touches[0].clientX,this.y=e.touches[0].clientY}onTouchMove(e){const r=Math.min(window.innerWidth/3,333),c=.33,s=e.touches[0].clientX,l=e.touches[0].clientY,i=this.x-s,u=this.y-l;if(Math.abs(i)>Math.abs(u)){const d=i<=0?1:-1,I=Math.max(1-(Math.abs(i)-Math.abs(u))/r,0),L=d*c*(Math.abs(i)-Math.abs(u));h.style.opacity=`${I}`,h.style.transform=`translateX( ${L}px )`,h.style.transition="none"}if(Math.abs(i)>Math.abs(u)&&Math.abs(i)-Math.abs(u)>r){if(i<0)return U();if(i>0)return S()}}onTouchEnd(e){h.style.opacity="",h.style.transform="",h.style.transition="",this.x=0,this.y=0}}var T=new he("#app-main-content");function pe(n){return console.log(n.current),t("section",{className:"app-infobar-bottom",children:n.userUID?o(p,{children:[o("button",{className:`btn ${n.current===n.paths.news?"active":""}`,onClick:()=>n.toNews(),children:[t(D,{}),t("small",{className:"text-muted d-block",children:n.names.news})]}),o("button",{className:`btn ${n.current===n.paths.apps?"active":""}`,onClick:()=>n.toApps(),children:[t(W,{}),t("small",{className:"text-muted d-block",children:n.names.apps})]}),o("button",{className:`btn ${n.current===n.paths.user?"active":""}`,onClick:()=>n.toUser(),children:[t(J,{}),t("small",{className:"text-muted d-block",children:n.names.user})]})]}):t(p,{children:o("button",{className:"btn",onClick:()=>{},children:[t(j,{}),t("small",{className:"text-muted d-block",children:"Our policy"})]})})},n.userUID)}function ue(n){return t(p,{children:t("section",{className:"app-infobar-top",children:n.userUID?o(p,{children:[o("button",{className:"btn",onClick:()=>n.goBack(),children:[t(B,{}),t("small",{className:"text-muted align-middle p-2",children:n.pathURL})]}),t("button",{className:"btn",onClick:()=>n.logout(),children:t(F,{})})]}):t(p,{children:o("button",{className:"btn",children:[t(H,{}),t("small",{className:"text-muted align-middle p-2",children:"Need help?"})]})})},n.userUID)})}function de(n){return o("form",{className:"app-login-form",children:[t("h2",{className:"fw-bold mb-0",children:"Join for free"}),t("hr",{className:"my-3"}),t("h3",{className:"fs-5 fw-bold mb-3",children:"Use a third-party"}),o("button",{className:"w-100 py-2 mb-2 btn btn-outline-primary btn-facebook",disabled:!0,children:[t(q,{}),t("span",{className:"align-middle p-2",children:"Join with Facebook"})]}),o("button",{className:"w-100 py-2 mb-2 btn btn-outline-success btn-google",disabled:!0,children:[t(z,{}),t("span",{className:"align-middle p-2",children:"Join with Google"})]}),o("button",{className:"w-100 py-2 mb-2 btn btn-outline-dark btn-github",disabled:!0,children:[t(X,{}),t("span",{className:"align-middle p-2",children:"Join with GitHub"})]}),t("hr",{className:"my-3"}),t("h3",{className:"fs-5 fw-bold mb-3",children:"Or join as anonymous"}),o("button",{className:"w-100 py-2 mb-2 btn btn-outline-secondary",onClick:()=>n.loginAnonymously(),children:[t(Y,{}),t("span",{className:"align-middle p-2",children:"Join anonymously"})]})]})}function v(n){return o("button",{className:"app-button-app btn btn-outline-dark",onClick:()=>n.open(),children:[n.icon,t("small",{className:"text-muted d-block",children:n.name})]})}function me(){const n=k();return o("section",{id:"app-apps-container",children:[t(v,{open:()=>n(a.pathAppTest),icon:t(w,{}),name:a.nameAppTest}),t(v,{open:()=>n(a.pathAppTest),icon:t(w,{}),name:a.nameAppTest}),t(v,{open:()=>n(a.pathAppTest),icon:t(w,{}),name:a.nameAppTest}),t(v,{open:()=>n(a.pathAppTest),icon:t(w,{}),name:a.nameAppTest}),t(v,{open:()=>n(a.pathAppTest),icon:t(w,{}),name:a.nameAppTest}),t(v,{open:()=>n(a.pathAppTest),icon:t(w,{}),name:a.nameAppTest})]})}function fe(){return t(p,{children:t("h1",{children:"News"})})}function be(){return t(p,{children:t("h1",{children:"User"})})}function ge(){return t(p,{children:t("h1",{children:"AppTest"})})}function we(){const n=G(),e=k(),r=[a.pathNews,a.pathApps,a.pathUser],c=n.pathname.split(/\//g)[1],{user:s,logout:l,loginAnonymously:i}=ie();return g.exports.useEffect(()=>(T.start({curr:c,prev:()=>e(r[r.indexOf(c)-1]||c),next:()=>e(r[r.indexOf(c)+1]||c)}),()=>{T.stop()})),o(p,{children:[t(ue,{goBack:()=>e(-1),logout:()=>l(),userUID:s==null?void 0:s.uid,pathURL:a.parse(n.pathname)}),t("main",{id:"app-main-content",children:t(K,{children:s?o(p,{children:[o(b,{path:a.pathApps,children:[t(b,{path:"",element:t(me,{})}),t(b,{path:a.pathAppTest,element:t(ge,{})})]}),t(b,{path:a.pathNews,element:t(fe,{})}),t(b,{path:a.pathUser,element:t(be,{})}),t(b,{path:"*",element:t(N,{to:a.pathApps})})]}):o(p,{children:[t(b,{path:a.pathLogin,element:t(de,{loginAnonymously:()=>i()})}),t(b,{path:"*",element:t(N,{to:a.pathLogin})})]})})},n.pathname),t(pe,{toApps:()=>e(a.pathApps),toNews:()=>e(a.pathNews),toUser:()=>e(a.pathUser),userUID:s==null?void 0:s.uid,current:n.pathname.split(/\//g)[1],names:{apps:a.nameApps,news:a.nameNews,user:a.nameUser},paths:{apps:a.pathApps,news:a.pathNews,user:a.pathUser}})]})}function ve(n={}){const{immediate:e=!1,onNeedRefresh:r,onOfflineReady:c,onRegistered:s,onRegisterError:l}=n;let i;const u=async(d=!0)=>{};return"serviceWorker"in navigator&&(i=new V("/hello-ts/sw.js",{scope:"/hello-ts/",type:"classic"}),i.addEventListener("activated",d=>{d.isUpdate?window.location.reload():c==null||c()}),i.register({immediate:e}).then(d=>{s==null||s(d)}).catch(d=>{l==null||l(d)})),u}let y;class ye{constructor(){f(this,"updateSW");f(this,"installPromptReady",new Event("isInstallPromptReady"));this.updateSW=ve({onNeedRefresh(){},onOfflineReady(){}}),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),y=e,window.dispatchEvent(this.installPromptReady)}),this.getInstallPrompt()}async getInstallPrompt(){return new Promise((e,r)=>{if(y)return e(y);window.addEventListener("isInstallPromptReady",c=>e(y))})}}var Ae=new ye;function Ne(){return o(p,{children:[t(le,{getInstallPrompt:Ae.getInstallPrompt}),t(Q,{children:t(oe,{children:t(we,{})})})]})}Z.exports.render(t(ee.StrictMode,{children:t(Ne,{})}),document.getElementById("root"));
