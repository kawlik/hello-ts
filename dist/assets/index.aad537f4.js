var $=Object.defineProperty;var L=(s,e,a)=>e in s?$(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a;var p=(s,e,a)=>(L(s,typeof e!="symbol"?e+"":e,a),a);import{i as P,g as _,s as E,r as b,j as t,a as o,F as m,d as M,b as R,c as C,e as O,f as D,h as T,k as W,l as J,m as j,n as B,o as F,p as H,q,u as X,t as Y,R as z,v as g,N as w,w as G,H as K,x as V,y as Q}from"./vendor.bbed7b42.js";const Z=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}};Z();var ee={apiKey:"AIzaSyAR6S5l9UiabY1TpO1DelUprklAJ6V5A8w",authDomain:"sockets-717fc.firebaseapp.com",projectId:"sockets-717fc",storageBucket:"sockets-717fc.appspot.com",messagingSenderId:"1073692013836",appId:"1:1073692013836:web:1af80e41fe3cc3c6a50529"};class te{constructor(){p(this,"firebaseApp");p(this,"firebaseAuth");this.firebaseApp=P(ee),this.firebaseAuth=_()}async getAuthAnonymously(){var e;return(e=await E(this.firebaseAuth))==null?void 0:e.user}}var se=new te,N={path:"hello",next:{user:{path:"user"}}};class ne{constructor(){}save(e,a){localStorage.setItem(e,JSON.stringify(a))}read(e){return JSON.parse(localStorage.getItem(e)||"null")}delete(e){localStorage.removeItem(e)}get pathUser(){var e;return`${N.path}.${(e=N.next)==null?void 0:e.user.path}`}saveUser(e){this.save(this.pathUser,e)}readUser(){return this.read(this.pathUser)}deleteUser(){this.delete(this.pathUser)}}var v=new ne;const S=b.exports.createContext(null);function ae(){return b.exports.useContext(S)}function re(s){const[e,a]=b.exports.useState(null);function l(){v.deleteUser(),a(null)}function n(){e||a(v.readUser())}function i(){!e||v.saveUser(e)}async function r(){a(await se.getAuthAnonymously())}return b.exports.useEffect(()=>{n(),i(),console.log(e)},[e]),t(S.Provider,{value:{user:e,logout:l,loginAnonymously:r},children:s.children})}function ie(s){const[e,a]=b.exports.useState(!1),[l,n]=b.exports.useState(!1);!e&&s.getInstallPrompt().then(()=>a(!0)).then(()=>n(!0));async function i(){const h=await s.getInstallPrompt();h.prompt();const{outcome:d}=await h.userChoice;d==="accepted"&&r()}function r(){n(!1)}return t("section",{className:"app-prompt-pwa",children:l&&o(m,{children:[o("button",{className:"btn btn-dark shadow",onClick:()=>i(),children:[t(M,{}),t("small",{className:"align-middle fw-bold p-2",children:"Install as PWA"})]}),o("button",{className:"btn btn-secondary shadow",onClick:()=>r(),children:[t(R,{}),t("small",{className:"align-middle fw-bold p-2",children:"Dismiss"})]})]})})}var f={name:"Hello",path:"hello",next:{apps:{name:"Apps",path:"apps"},login:{name:"Login",path:"login"},news:{name:"News",path:"news"},user:{name:"User",path:"user"}}};class oe{constructor(){p(this,"parser",new Map);this.parser.set("/"+this.pathApps,this.nameApps),this.parser.set("/"+this.pathNews,this.nameNews),this.parser.set("/"+this.pathUser,this.nameUser),this.parser.set("/"+this.pathLogin,this.nameLogin)}parse(e){return this.parser.get(e)||""}get pathApps(){var e;return`${(e=f.next)==null?void 0:e.apps.path}`}get nameApps(){var e;return`${(e=f.next)==null?void 0:e.apps.name}`}get pathNews(){var e;return`${(e=f.next)==null?void 0:e.news.path}`}get nameNews(){var e;return`${(e=f.next)==null?void 0:e.news.name}`}get pathUser(){var e;return`${(e=f.next)==null?void 0:e.user.path}`}get nameUser(){var e;return`${(e=f.next)==null?void 0:e.user.name}`}get pathLogin(){var e;return`${(e=f.next)==null?void 0:e.login.path}`}get nameLogin(){var e;return`${(e=f.next)==null?void 0:e.login.name}`}}var c=new oe;let u,x,A;class le{constructor(e){p(this,"x",0);p(this,"y",0);this.selector=e}start(e){u=document.querySelector(this.selector),x=e==null?void 0:e.prev,A=e==null?void 0:e.next,e==null||e.curr,u.addEventListener("touchstart",this.onTouchStart),u.addEventListener("touchmove",this.onTouchMove),u.addEventListener("touchend",this.onTouchEnd)}stop(){u.removeEventListener("touchstart",this.onTouchStart),u.removeEventListener("touchmove",this.onTouchMove),u.removeEventListener("touchend",this.onTouchEnd)}onTouchStart(e){this.x=e.touches[0].clientX,this.y=e.touches[0].clientY}onTouchMove(e){const a=Math.min(window.innerWidth/3,333),l=.33,n=e.touches[0].clientX,i=e.touches[0].clientY,r=this.x-n,h=this.y-i;if(Math.abs(r)>Math.abs(h)){const d=r<=0?1:-1,I=Math.max(1-(Math.abs(r)-Math.abs(h))/a,0),k=d*l*(Math.abs(r)-Math.abs(h));u.style.opacity=`${I}`,u.style.transform=`translateX( ${k}px )`,u.style.transition="none"}if(Math.abs(r)>Math.abs(h)&&Math.abs(r)-Math.abs(h)>a){if(r<0)return x();if(r>0)return A()}}onTouchEnd(e){u.style.opacity="",u.style.transform="",u.style.transition="",this.x=0,this.y=0}}var U=new le("#app-main-content");function ce(s){return t("section",{className:"app-infobar-bottom",children:s.userUID?o(m,{children:[o("button",{className:`btn ${s.current===s.names.news?"active":""}`,onClick:()=>s.toNews(),children:[t(C,{}),t("small",{className:"text-muted d-block",children:s.names.news})]}),o("button",{className:`btn ${s.current===s.names.apps?"active":""}`,onClick:()=>s.toApps(),children:[t(O,{}),t("small",{className:"text-muted d-block",children:s.names.apps})]}),o("button",{className:`btn ${s.current===s.names.user?"active":""}`,onClick:()=>s.toUser(),children:[t(D,{}),t("small",{className:"text-muted d-block",children:s.names.user})]})]}):t(m,{children:o("button",{className:"btn",onClick:()=>{},children:[t(T,{}),t("small",{className:"text-muted d-block",children:"Our policy"})]})})},s.userUID)}function ue(s){return t(m,{children:t("section",{className:"app-infobar-top",children:s.userUID?o(m,{children:[o("button",{className:"btn",onClick:()=>s.goBack(),children:[t(W,{}),t("small",{className:"text-muted align-middle p-2",children:s.pathURL})]}),t("button",{className:"btn",onClick:()=>s.logout(),children:t(J,{})})]}):t(m,{children:o("button",{className:"btn",children:[t(j,{}),t("small",{className:"text-muted align-middle p-2",children:"Need help?"})]})})},s.userUID)})}function he(s){return o("form",{className:"app-login-form",children:[t("h2",{className:"fw-bold mb-0",children:"Join for free"}),t("hr",{className:"my-3"}),t("h3",{className:"fs-5 fw-bold mb-3",children:"Use a third-party"}),o("button",{className:"w-100 py-2 mb-2 btn btn-outline-primary btn-facebook",disabled:!0,children:[t(B,{}),t("span",{className:"align-middle p-2",children:"Join with Facebook"})]}),o("button",{className:"w-100 py-2 mb-2 btn btn-outline-success btn-google",disabled:!0,children:[t(F,{}),t("span",{className:"align-middle p-2",children:"Join with Google"})]}),o("button",{className:"w-100 py-2 mb-2 btn btn-outline-dark btn-github",disabled:!0,children:[t(H,{}),t("span",{className:"align-middle p-2",children:"Join with GitHub"})]}),t("hr",{className:"my-3"}),t("h3",{className:"fs-5 fw-bold mb-3",children:"Or join as anonymous"}),o("button",{className:"w-100 py-2 mb-2 btn btn-outline-secondary",onClick:()=>s.loginAnonymously(),children:[t(q,{}),t("span",{className:"align-middle p-2",children:"Join anonymously"})]})]})}function de(){const s=X(),e=Y(),a=[c.pathNews,c.pathApps,c.pathUser],l=s.pathname.split(/\//g)[1],{user:n,logout:i,loginAnonymously:r}=ae();return b.exports.useEffect(()=>(U.start({curr:l,prev:()=>e(a[a.indexOf(l)-1]||l),next:()=>e(a[a.indexOf(l)+1]||l)}),()=>{U.stop()})),o(m,{children:[t(ue,{goBack:()=>e(-1),logout:()=>i(),userUID:n==null?void 0:n.uid,pathURL:c.parse(s.pathname)}),t("main",{id:"app-main-content",children:t(z,{children:n?o(m,{children:[t(g,{path:c.pathApps,element:t("h1",{children:"Apps"})}),t(g,{path:c.pathNews,element:t("h1",{children:"News"})}),t(g,{path:c.pathUser,element:t("h1",{children:"User"})}),t(g,{path:"*",element:t(w,{to:c.pathApps})})]}):o(m,{children:[t(g,{path:c.pathLogin,element:t(he,{loginAnonymously:()=>r()})}),t(g,{path:"*",element:t(w,{to:c.pathLogin})})]})})},s.pathname),t(ce,{toApps:()=>e(c.pathApps),toNews:()=>e(c.pathNews),toUser:()=>e(c.pathUser),userUID:n==null?void 0:n.uid,current:c.parse(s.pathname),names:{apps:c.nameApps,news:c.nameNews,user:c.nameUser}})]})}function me(s={}){const{immediate:e=!1,onNeedRefresh:a,onOfflineReady:l,onRegistered:n,onRegisterError:i}=s;let r;const h=async(d=!0)=>{};return"serviceWorker"in navigator&&(r=new G("/hello-ts/sw.js",{scope:"/hello-ts/",type:"classic"}),r.addEventListener("activated",d=>{d.isUpdate?window.location.reload():l==null||l()}),r.register({immediate:e}).then(d=>{n==null||n(d)}).catch(d=>{i==null||i(d)})),h}let y;class pe{constructor(){p(this,"updateSW");p(this,"installPromptReady",new Event("isInstallPromptReady"));this.updateSW=me({onNeedRefresh(){},onOfflineReady(){}}),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),y=e,window.dispatchEvent(this.installPromptReady)}),this.getInstallPrompt()}async getInstallPrompt(){return new Promise((e,a)=>{if(y)return e(y);window.addEventListener("isInstallPromptReady",l=>e(y))})}}var fe=new pe;function be(){return o(m,{children:[t(ie,{getInstallPrompt:fe.getInstallPrompt}),t(K,{children:t(re,{children:t(de,{})})})]})}V.exports.render(t(Q.StrictMode,{children:t(be,{})}),document.getElementById("root"));
