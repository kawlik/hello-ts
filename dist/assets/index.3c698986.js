var C=Object.defineProperty;var T=(s,e,a)=>e in s?C(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a;var g=(s,e,a)=>(T(s,typeof e!="symbol"?e+"":e,a),a);import{i as _,g as E,s as M,r as f,j as t,a as r,F as u,d as R,b as O,c as D,e as W,f as j,h as J,k as z,l as B,m as F,n as H,o as q,p as X,q as Y,u as $,t as v,v as G,w as K,R as V,x as b,N,y as Q,H as Z,z as ee,A as te}from"./vendor.b4711d08.js";const se=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}};se();var ne={apiKey:"AIzaSyAR6S5l9UiabY1TpO1DelUprklAJ6V5A8w",authDomain:"sockets-717fc.firebaseapp.com",projectId:"sockets-717fc",storageBucket:"sockets-717fc.appspot.com",messagingSenderId:"1073692013836",appId:"1:1073692013836:web:1af80e41fe3cc3c6a50529"};class ae{constructor(){g(this,"firebaseApp");g(this,"firebaseAuth");this.firebaseApp=_(ne),this.firebaseAuth=E()}async getAuthAnonymously(){var e;return(e=await M(this.firebaseAuth))==null?void 0:e.user}}var re=new ae,x={path:"hello",next:{user:{path:"user"}}};class ie{constructor(){}save(e,a){localStorage.setItem(e,JSON.stringify(a))}read(e){return JSON.parse(localStorage.getItem(e)||"null")}delete(e){localStorage.removeItem(e)}get pathUser(){var e;return`${x.path}.${(e=x.next)==null?void 0:e.user.path}`}saveUser(e){this.save(this.pathUser,e)}readUser(){return this.read(this.pathUser)}deleteUser(){this.delete(this.pathUser)}}var y=new ie;const I=f.exports.createContext(null);function le(){return f.exports.useContext(I)}function oe(s){const[e,a]=f.exports.useState(null);function c(){y.deleteUser(),a(null)}function n(){e||a(y.readUser())}function o(){!e||y.saveUser(e)}async function l(){a(await re.getAuthAnonymously())}return f.exports.useEffect(()=>{n(),o(),console.log(e)},[e]),t(I.Provider,{value:{user:e,logout:c,loginAnonymously:l},children:s.children})}function ce(s){const[e,a]=f.exports.useState(!1),[c,n]=f.exports.useState(!1);!e&&s.getInstallPrompt().then(()=>a(!0)).then(()=>n(!0));async function o(){const d=await s.getInstallPrompt();d.prompt();const{outcome:p}=await d.userChoice;p==="accepted"&&l()}function l(){n(!1)}return t("section",{className:"app-prompt-pwa",children:c&&r(u,{children:[r("button",{className:"btn btn-dark shadow",onClick:()=>o(),children:[t(R,{}),t("small",{className:"align-middle fw-bold p-2",children:"Install as PWA"})]}),r("button",{className:"btn btn-secondary shadow",onClick:()=>l(),children:[t(O,{}),t("small",{className:"align-middle fw-bold p-2",children:"Dismiss"})]})]})})}var m={name:"Hello",path:"hello",next:{apps:{name:"Apps",path:"apps",next:{test:{name:"App Test",path:"test"}}},login:{name:"Login",path:"login"},news:{name:"News",path:"news"},user:{name:"User",path:"user"}}};class he{constructor(){g(this,"parser",new Map);this.parser.set("/"+this.pathApps,this.nameApps),this.parser.set("/"+this.pathApps+"/"+this.pathAppTest,this.nameAppTest),this.parser.set("/"+this.pathNews,this.nameNews),this.parser.set("/"+this.pathUser,this.nameUser),this.parser.set("/"+this.pathLogin,this.nameLogin)}parse(e){return this.parser.get(e)||""}get pathApps(){var e;return`${(e=m.next)==null?void 0:e.apps.path}`}get nameApps(){var e;return`${(e=m.next)==null?void 0:e.apps.name}`}get pathAppTest(){var e,a;return`${(a=(e=m.next)==null?void 0:e.apps.next)==null?void 0:a.test.path}`}get nameAppTest(){var e,a;return`${(a=(e=m.next)==null?void 0:e.apps.next)==null?void 0:a.test.name}`}get pathNews(){var e;return`${(e=m.next)==null?void 0:e.news.path}`}get nameNews(){var e;return`${(e=m.next)==null?void 0:e.news.name}`}get pathUser(){var e;return`${(e=m.next)==null?void 0:e.user.path}`}get nameUser(){var e;return`${(e=m.next)==null?void 0:e.user.name}`}get pathLogin(){var e;return`${(e=m.next)==null?void 0:e.login.path}`}get nameLogin(){var e;return`${(e=m.next)==null?void 0:e.login.name}`}}var i=new he;let h,A,U;class ue{constructor(e){g(this,"x",0);g(this,"y",0);this.selector=e}start(e){h=document.querySelector(this.selector),A=e==null?void 0:e.prev,U=e==null?void 0:e.next,e==null||e.curr,h.addEventListener("touchstart",this.onTouchStart),h.addEventListener("touchmove",this.onTouchMove),h.addEventListener("touchend",this.onTouchEnd)}stop(){h.removeEventListener("touchstart",this.onTouchStart),h.removeEventListener("touchmove",this.onTouchMove),h.removeEventListener("touchend",this.onTouchEnd)}onTouchStart(e){this.x=e.touches[0].clientX,this.y=e.touches[0].clientY}onTouchMove(e){const a=Math.min(window.innerWidth/3,333),c=.33,n=e.touches[0].clientX,o=e.touches[0].clientY,l=this.x-n,d=this.y-o;if(Math.abs(l)>Math.abs(d)){const p=l<=0?1:-1,L=Math.max(1-(Math.abs(l)-Math.abs(d))/a,0),P=p*c*(Math.abs(l)-Math.abs(d));h.style.opacity=`${L}`,h.style.transform=`translateX( ${P}px )`,h.style.transition="none"}if(Math.abs(l)>Math.abs(d)&&Math.abs(l)-Math.abs(d)>a){if(l<0)return A();if(l>0)return U()}}onTouchEnd(e){h.style.opacity="",h.style.transform="",h.style.transition="",this.x=0,this.y=0}}var S=new ue("#app-main-content");function de(s){return t("section",{className:"app-infobar-bottom",children:s.userUID?r(u,{children:[r("button",{className:`btn ${s.current===s.paths.news?"active":""}`,onClick:()=>s.toNews(),children:[t(D,{}),t("small",{className:"text-muted d-block",children:s.names.news})]}),r("button",{className:`btn ${s.current===s.paths.apps?"active":""}`,onClick:()=>s.toApps(),children:[t(W,{}),t("small",{className:"text-muted d-block",children:s.names.apps})]}),r("button",{className:`btn ${s.current===s.paths.user?"active":""}`,onClick:()=>s.toUser(),children:[t(j,{}),t("small",{className:"text-muted d-block",children:s.names.user})]})]}):t(u,{children:r("button",{className:"btn",onClick:()=>{},children:[t(J,{}),t("small",{className:"text-muted d-block",children:"Our policy"})]})})},s.userUID)}function pe(s){return t(u,{children:t("section",{className:"app-infobar-top",children:s.userUID?r(u,{children:[r("button",{className:"btn",onClick:()=>s.goBack(),children:[t(z,{}),t("small",{className:"text-muted align-middle p-2",children:s.pathURL})]}),t("button",{className:"btn",onClick:()=>s.logout(),children:t(B,{})})]}):t(u,{children:r("button",{className:"btn",children:[t(F,{}),t("small",{className:"text-muted align-middle p-2",children:"Need help?"})]})})},s.userUID)})}function me(s){return r("form",{className:"app-login-form",children:[t("h2",{className:"fw-bold mb-0",children:"Join for free"}),t("hr",{className:"my-3"}),t("h3",{className:"fs-5 fw-bold mb-3",children:"Use a third-party"}),r("button",{className:"w-100 py-2 mb-2 btn btn-outline-primary btn-facebook",disabled:!0,children:[t(H,{}),t("span",{className:"align-middle p-2",children:"Join with Facebook"})]}),r("button",{className:"w-100 py-2 mb-2 btn btn-outline-success btn-google",disabled:!0,children:[t(q,{}),t("span",{className:"align-middle p-2",children:"Join with Google"})]}),r("button",{className:"w-100 py-2 mb-2 btn btn-outline-dark btn-github",disabled:!0,children:[t(X,{}),t("span",{className:"align-middle p-2",children:"Join with GitHub"})]}),t("hr",{className:"my-3"}),t("h3",{className:"fs-5 fw-bold mb-3",children:"Or join as anonymous"}),r("button",{className:"w-100 py-2 mb-2 btn btn-outline-secondary",onClick:()=>s.loginAnonymously(),children:[t(Y,{}),t("span",{className:"align-middle p-2",children:"Join anonymously"})]})]})}function k(s){return r("button",{className:"app-button-app btn btn-light",onClick:()=>s.open(),children:[s.icon,t("small",{className:"text-muted d-block",children:s.name})]})}function fe(){const s=$();return r("section",{id:"app-apps-container",children:[t(k,{open:()=>s(i.pathAppTest),icon:t(v,{}),name:i.nameAppTest}),t(k,{open:()=>s(i.pathAppTest),icon:t(v,{}),name:i.nameAppTest})]})}function ge(){return t(u,{children:t("h1",{children:"News"})})}function be(){return t(u,{children:t("h1",{children:"User"})})}function we(s){return t("section",{className:"app-content",children:s.children})}function ye(s){return r("section",{className:"app-display-user",children:[t("span",{className:"item lead",children:t("span",{children:s.selectedUser})}),t("span",{className:"item btn p-0",onClick:()=>s.unselectUser(),children:"change"})]})}function ve(s){const e=["aaa","bbb","ccc","ddd","eee","fff","ggg","hhh","iii","jjj","kkk","lll","mmm","nnn","ooo","ppp","rrr","sss","ttt","uuu","www","zzz"],[a,c]=f.exports.useState("");return r("section",{className:"app-select-user",children:[t("h2",{className:"lead",children:"Select user"}),r("div",{className:"input-group",children:[t("input",{type:"text",className:"form-control",onChange:n=>c(n.target.value)}),t("span",{className:"input-group-text",children:t(G,{})})]}),t("div",{className:"outcome-users",children:e.filter(n=>n.match(new RegExp(a,"gi"))).map(n=>t("button",{className:"btn",onClick:()=>s.setSelectedUser(n),children:n},n))})]})}function Ne(){const[s,e]=f.exports.useState("");return t(u,{children:s?r("article",{id:"app-layout-test",children:[t(ye,{selectedUser:s,unselectUser:()=>e("")}),t(we,{})]}):t(ve,{setSelectedUser:a=>e(a)})})}function xe(){const s=K(),e=$(),a=[i.pathNews,i.pathApps,i.pathUser],c=s.pathname.split(/\//g)[1],{user:n,logout:o,loginAnonymously:l}=le();return f.exports.useEffect(()=>(S.start({curr:c,prev:()=>e(a[a.indexOf(c)-1]||c),next:()=>e(a[a.indexOf(c)+1]||c)}),()=>{S.stop()})),r(u,{children:[t(pe,{goBack:()=>e(-1),logout:()=>o(),userUID:n==null?void 0:n.uid,pathURL:i.parse(s.pathname)}),t("main",{id:"app-main-content",children:t(V,{children:n?r(u,{children:[r(b,{path:i.pathApps,children:[t(b,{path:"",element:t(fe,{})}),t(b,{path:i.pathAppTest,element:t(Ne,{})})]}),t(b,{path:i.pathNews,element:t(ge,{})}),t(b,{path:i.pathUser,element:t(be,{})}),t(b,{path:"*",element:t(N,{to:i.pathApps})})]}):r(u,{children:[t(b,{path:i.pathLogin,element:t(me,{loginAnonymously:()=>l()})}),t(b,{path:"*",element:t(N,{to:i.pathLogin})})]})})},s.pathname),t(de,{toApps:()=>e(i.pathApps),toNews:()=>e(i.pathNews),toUser:()=>e(i.pathUser),userUID:n==null?void 0:n.uid,current:s.pathname.split(/\//g)[1],names:{apps:i.nameApps,news:i.nameNews,user:i.nameUser},paths:{apps:i.pathApps,news:i.pathNews,user:i.pathUser}})]})}function Ae(s={}){const{immediate:e=!1,onNeedRefresh:a,onOfflineReady:c,onRegistered:n,onRegisterError:o}=s;let l;const d=async(p=!0)=>{};return"serviceWorker"in navigator&&(l=new Q("/hello-ts/sw.js",{scope:"/hello-ts/",type:"classic"}),l.addEventListener("activated",p=>{p.isUpdate?window.location.reload():c==null||c()}),l.register({immediate:e}).then(p=>{n==null||n(p)}).catch(p=>{o==null||o(p)})),d}let w;class Ue{constructor(){g(this,"updateSW");g(this,"installPromptReady",new Event("isInstallPromptReady"));this.updateSW=Ae({onNeedRefresh(){},onOfflineReady(){}}),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),w=e,window.dispatchEvent(this.installPromptReady)}),this.getInstallPrompt()}async getInstallPrompt(){return new Promise((e,a)=>{if(w)return e(w);window.addEventListener("isInstallPromptReady",c=>e(w))})}}var Se=new Ue;function ke(){return r(u,{children:[t(ce,{getInstallPrompt:Se.getInstallPrompt}),t(Z,{children:t(oe,{children:t(xe,{})})})]})}ee.exports.render(t(te.StrictMode,{children:t(ke,{})}),document.getElementById("root"));
